version: "3"
services:
  "tftp-client.example.com":
    image: tftp
    hostname: tftp-client
    domainname: tftp-client.example.com
    command: ["client", "copy", "tftp-server.example.com", "33333", "-o output_file.md", "README.md"]
    depends_on:
      - tftp-server.example.com
    environment:
      JAVA_OPTS: -Djava.util.logging.level=FINEST  -Djavax.net.ssl.trustStore=certificates/tftp-server.example.com/KeyStore.jks -Djavax.net.ssl.trustStorePassword=tester1234
  "tftp-server.example.com":
    image: tftp
    command: ["server", "--key-store=certificates/tftp-server.example.com/KeyStore.jks", "--key-store-password=tester1234", "33333", "/tmp/src"]
    hostname: tftp-server
    domainname: tftp-server.example.com
    environment:
      JAVA_OPTS: -Djava.util.logging.ConsoleHandler.level=FINEST  -Djavax.net.ssl.trustStore=certificates/tftp-server.example.com/KeyStore.jks -Djavax.net.ssl.trustStorePassword=tester1234
#      JAVA_OPTS: -Djavax.net.debug=all
    ports:
      - "33333"